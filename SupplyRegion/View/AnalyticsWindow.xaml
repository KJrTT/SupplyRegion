<Window x:Class="SupplyRegion.View.AnalyticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Аналитика заявок"
        Height="500" Width="800"
        WindowStartupLocation="CenterOwner"
        Background="#F8FAFC">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        
        <StackPanel Grid.Row="0" Margin="0 0 0 16">
            <TextBlock Text="Аналитика по статусам заявок"
                      FontSize="22"
                      FontWeight="Bold"
                      Foreground="#1E293B"/>
            <TextBlock Text="Количество и сумма заявок в разрезе статусов"
                      FontSize="13"
                      Foreground="#64748B"
                      Margin="0 4 0 0"/>
        </StackPanel>

        
        <Border Grid.Row="1"
               Background="White"
               CornerRadius="12"
               BorderBrush="#E2E8F0"
               BorderThickness="1"
               Padding="16">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding StatusSummaries}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0 0 0 12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                          Text="{Binding Status}"
                                          FontWeight="SemiBold"
                                          Foreground="#1E293B"/>

                                <TextBlock Grid.Column="1"
                                          Text="{Binding Count, StringFormat='{}{0} шт.'}"
                                          Foreground="#64748B"/>

                                <TextBlock Grid.Column="2"
                                          Text="{Binding TotalAmount, StringFormat='{}₽{0:N0}'}"
                                          Foreground="#10B981"/>

                                
                                <Border Grid.Column="3"
                                       Height="10"
                                       Background="#E5E7EB"
                                       CornerRadius="5"
                                       VerticalAlignment="Center">
                                    <Border Background="#3B82F6"
                                           CornerRadius="5"
                                           HorizontalAlignment="Left"
                                           Width="{Binding Percent}"/>
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>

